"use strict";$(document).ready(function(){function e(){window.addEventListener("scroll",function(e){l||(l=!0,setTimeout(i,250))},!1),o()>c&&$(d).addClass("shrink")}function i(){var e=o();e>=c?$(d).removeClass("shrink").addClass("shrink"):$(d).removeClass("shrink"),l=!1}function o(){return window.pageYOffset||r.scrollTop}function t(){var e=$("#success-modal");e.length&&$.magnificPopup.open({items:{src:e},type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,showCloseBtn:!1,mainClass:"my-mfp-slide-bottom"})}function a(){var e=$("#error-modal");e.length&&$.magnificPopup.open({items:{src:e},type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,showCloseBtn:!1,mainClass:"my-mfp-slide-bottom"})}var n=!1,s=$(".main-mobile-menu");setTimeout(function(){$(".mouse").addClass("hide"),setTimeout(function(){$(".mouse").remove()},400)},6e3),$(".mouse").click(function(){return $("html, body").animate({scrollTop:$(".taxi-hero").height()+120},"slow"),!1}),$("#owl-blog").owlCarousel({navigation:!0,slideSpeed:300,paginationSpeed:400,pagination:!1,singleItem:!0,navigationText:["",""]}),$("img, a").on("dragstart",function(e){e.preventDefault()}),$(".taxi-header--burger").click(function(){s.addClass("open"),n=!0}),$(".mobile-menu-close").click(function(){s.removeClass("open"),n=!1}),$("#telephone").mask("+99999999?9999999");var r=document.documentElement,d=document.querySelector("header.taxi-header"),l=!1,c=70;e(),$(".taxi-clients").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,showCloseBtn:!1,mainClass:"my-mfp-slide-bottom"}),$(".taxi-header--btn, .taxi-hero--btn, .taxi-pricing--btn").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,showCloseBtn:!1,mainClass:"my-mfp-slide-bottom",callbacks:{beforeOpen:function(){n&&s.removeClass("open")}}}),$(".gallery").each(function(){$(this).magnificPopup({delegate:"a",type:"image",closeOnContentClick:!0,mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,2],tCounter:'<span class="mfp-counter">%curr% из %total%</span>'},image:{verticalFit:!0}})}),$(".closeBtn").click(function(){$.magnificPopup.close()}),$(".taxi-about--clients").waypoint(function(){$(".taxi-about--clients").addClass("on")},{offset:"70%"}),$(".taxi-about--drivers").waypoint(function(){$(".taxi-about--android").addClass("on"),$(".taxi-about--drivers").addClass("on")},{offset:"70%"}),$(".bottom-screen-wrap").waypoint(function(){$(".taxi-about--dapp").addClass("on")},{offset:"50%"}),$(".taxi-admin--operators").waypoint(function(){$(".taxi-admin--operators").addClass("on"),setTimeout(function(){$(".taxi-about--dapp").addClass("on")},1e3),$(".taxi-admin--operators-thumbs a").each(function(e){var i=$(this);setInterval(function(){i.addClass("on")},200*e)})},{offset:"50%"}),$(".taxi-admin--managers").waypoint(function(){$(".taxi-admin--managers").addClass("on"),$("svg#svggraph").addClass("grown"),$(".taxi-download").addClass("on")},{offset:"50%"}),$(".taxi-indicators").waypoint(function(){$(".taxi-indicators--label-bg").addClass("on"),$(".taxi-indicators--label-sm").addClass("on"),$(".indicator").each(function(e){var i=$(this);setInterval(function(){i.addClass("on")},200*e)})},{offset:"50%"}),$(".taxi-knowh").waypoint(function(){$(".taxi-knowh--label").addClass("on"),$(".taxi-kn").each(function(e){var i=$(this);setInterval(function(){i.addClass("on")},200*e)})},{offset:"50%"}),$(".taxi-cooperation").waypoint(function(){$(".taxi-cooperation--title").addClass("on"),$(".taxi-cooperation--l").addClass("on"),$(".taxi-cooperation--r").addClass("on")},{offset:"50%"}),$(".taxi-pricing").waypoint(function(){$(".taxi-pricing--title").addClass("on"),$(".taxi-pricing--desc").addClass("on"),$(".taxi-pricing--services a").each(function(e){var i=$(this);setInterval(function(){i.addClass("on")},200*e)})},{offset:"50%"}),$('.main-mobile-menu .nav a[href*="#"]:not([href="#"])').click(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var i=$(this.hash);if(i=i.length?i:$("[name="+this.hash.slice(1)+"]"),n&&s.removeClass("open"),i.length)return $("html, body").animate({scrollTop:i.offset().top-50},1e3),!1}});var m,p=$("nav.main-nav"),f=p.outerHeight()+15,u=p.find("a"),h=u.map(function(){var e=$($(this).attr("href"));return e.length?e:void 0});u.click(function(e){var i=$(this).attr("href"),o="#"===i?0:$(i).offset().top-f+1;u.filter('a[href!="'+i+'"]').removeClass("active"),$("html, body").stop().animate({scrollTop:o},1e3),e.preventDefault()}),$(window).scroll(function(){var e=$(this).scrollTop()+f,i=h.map(function(){return $(this).offset().top<e?this:void 0});i=i[i.length-1];var o=i&&i.length?i[0].id:"";m!==o&&(m=o,u.removeClass("active").filter('a[href="#'+o+'"]').addClass("active"))}),$("#leaveDemoRequest").submit(function(e){var i=$($(this)[0]),o=i.serializeArray();return $.post(i.prop("action"),o).success(function(e){i.find("input").val(""),t()}).fail(function(e){i.find("input").val(""),a()}),!1}),$.ajaxSetup({beforeSend:function(e,i){function o(e){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),t=0;t<o.length;t++){var a=jQuery.trim(o[t]);if(a.substring(0,e.length+1)==e+"="){i=decodeURIComponent(a.substring(e.length+1));break}}return i}"POST"==i.type&&e.setRequestHeader("X-CSRFToken",o("csrftoken"))}}),$(".match-height").matchHeight()}),$(document).ready(function(){function e(){window.devicePixelRatio>1||$(window).width()>1370?(Modernizr.video&&Modernizr.video.h264?s.src=n[1][0]:Modernizr.video&&Modernizr.video.webm&&(s.src=n[1][1]),s.load()):(Modernizr.video&&Modernizr.video.h264?s.src=n[0][0]:Modernizr.video&&Modernizr.video.webm&&(s.src=n[0][1]),s.load())}function i(){$(".taxi-hero--map").width($(window).width()),$(".taxi-hero--map").height($(window).height());var e=$(window).width()/o,i=$(window).height()/t,n=e>i?e:i;a>n*o&&(n=a/o),$("#mapvideo").width(n*o),$("#mapvideo").height(n*t),$(".taxi-hero--map").scrollLeft(($("#mapvideo").width()-$(window).width())/2),$(".taxi-hero--map").scrollTop(($("#mapvideo").height()-$(window).height())/2)}var o,t,a=300;(window.devicePixelRatio>1||$(window).width()>1370)&&$("#mapvideo").attr("poster","images/poster-lg.jpg");var n=[["media/md/map.mp4","media/md/map.webm"],["media/lg/map.mp4","media/lg/map.webm"]],s=document.getElementById("mapvideo");o=parseInt($("#mapvideo").attr("width")),t=parseInt($("#mapvideo").attr("height")),$(window).resize(function(){e(),$(window).width()>540?($("#mapvideo").get(0).play(),$(".taxi-hero--map").show(),i()):($(".taxi-hero--map").hide(),$("#mapvideo").get(0).pause())}),$(window).trigger("resize")});